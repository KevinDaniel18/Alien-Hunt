(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const N="/Alien-Hunt/assets/background-B3fPMu9P.png",V="/Alien-Hunt/assets/crosshair-ol1W4qiC.png",q="/Alien-Hunt/assets/shoot-BdVhEVXM.wav",U="/Alien-Hunt/assets/SHEET-D4ju48fn.PNG";class _{x=0;y=0;size=1;speed=1;opacity=1;deltaOpacity=.01;canvas;constructor(t){this.canvas=t,this.reset(),this.y=Math.random()*this.canvas.height,this.opacity=Math.random(),this.deltaOpacity=Math.random()*.02+.005}reset(){this.x=Math.random()*this.canvas.width,this.y=0,this.size=Math.random()*2+.5,this.speed=Math.random()*.5+.2,this.opacity=Math.random(),this.deltaOpacity=Math.random()*.02+.005}update(){this.y+=this.speed,this.y>this.canvas.height&&this.reset(),this.opacity+=this.deltaOpacity,(this.opacity>=1||this.opacity<=.3)&&(this.deltaOpacity*=-1)}draw(t){t.fillStyle=`rgba(255, 255, 255, ${this.opacity.toFixed(2)})`,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill()}}class j{x;y;width=200;height=200;scale=.3;currentAnimation="idle";currentFrame=0;frameCount=0;animationSpeed=1;vx;vy;targetX;targetY;isAlive=!0;isDying=!1;dyingTime=0;moveInterval=0;canvas;alienSpriteSheet;animations={idle:{frames:[0,1],speed:40},walk:{frames:[2,3,4],speed:20},jump:{frames:[5,6,7],speed:15},dying:{frames:[8,9,10],speed:10}};constructor(t,n,a,r){this.canvas=t,this.alienSpriteSheet=n,this.x=a,this.y=r,this.targetX=a,this.targetY=r,this.vx=(Math.random()-.5)*2,this.vy=(Math.random()-.5)*2,this.setRandomTarget(),this.moveInterval=setInterval(()=>{this.isAlive&&!this.isDying&&this.setRandomTarget()},Math.random()*3e3+2500)}setRandomTarget(){this.targetX=Math.random()*(this.canvas.width-this.width*this.scale),this.targetY=Math.random()*(this.canvas.height-this.height*this.scale),this.setAnimation("walk")}setAnimation(t){this.animations[t]&&this.currentAnimation!==t&&(this.currentAnimation=t,this.currentFrame=0,this.frameCount=0)}checkCollision(t,n){const a=Math.max(this.width*this.scale,this.height*this.scale),r=10;return t>=this.x-r&&t<=this.x+a+r&&n>=this.y-r&&n<=this.y+a+r}hit(){this.isAlive&&!this.isDying&&(this.isDying=!0,this.dyingTime=performance.now(),this.setAnimation("dying"),clearInterval(this.moveInterval),setTimeout(()=>{this.isAlive=!1},1e3))}update(){if(!this.isAlive)return;if(this.isDying){if(performance.now()-this.dyingTime>1e3){this.isAlive=!1;return}}else{const n=this.targetX-this.x,a=this.targetY-this.y,r=Math.sqrt(n*n+a*a);r>5?(this.x+=n/r*1.5,this.y+=a/r*1.5):this.setAnimation("idle"),this.x=Math.max(0,Math.min(this.canvas.width-this.width*this.scale,this.x)),this.y=Math.max(0,Math.min(this.canvas.height-this.height*this.scale,this.y))}const t=this.animations[this.currentAnimation];this.frameCount++,this.frameCount>=t.speed/this.animationSpeed&&(this.currentFrame=(this.currentFrame+1)%t.frames.length,this.frameCount=0)}draw(t){if(!this.isAlive)return;t.save();const a=this.animations[this.currentAnimation].frames[this.currentFrame];if(a<0||a>10){console.warn(`Frame index out of range: ${a}`),t.restore();return}const l={0:{x:0,y:0},1:{x:200,y:0},2:{x:0,y:200},3:{x:200,y:200},4:{x:400,y:200},5:{x:0,y:400},6:{x:200,y:400},7:{x:400,y:400},8:{x:0,y:600},9:{x:200,y:600},10:{x:400,y:600}}[a];if(!l){t.restore();return}const c=l.x,f=l.y;if(this.isDying){const g=performance.now()-this.dyingTime,v=Math.max(.3,1-g/1e3);t.globalAlpha=v}t.imageSmoothingEnabled=!1,t.drawImage(this.alienSpriteSheet,c,f,this.width,this.height,this.x,this.y,this.width*this.scale,this.height*this.scale),t.restore()}destroy(){clearInterval(this.moveInterval)}}const K="/Alien-Hunt/assets/start-DTug5N_V.png",J="/Alien-Hunt/assets/pause-BdLEW4AN.png",Q="/Alien-Hunt/assets/restart-B5TpDEW6.png",Z="/Alien-Hunt/assets/save-BkGNuhBb.png",ee="/Alien-Hunt/assets/border-NX6qtyDi.png",o=document.getElementById("gameCanvas"),u=o.getContext("2d");if(!u)throw new Error("Could not get 2D context");o.width=window.innerWidth;o.height=window.innerHeight;const M=new Image;M.src=N;const D=new Image;D.src=U;const O=new Image;O.src=K;const L=new Image;L.src=J;const k=new Image;k.src=Q;const H=new Image;H.src=Z;const te=new Image;te.src=ee;M.onload=()=>{u.drawImage(M,0,0,o.width,o.height)};const ie=Array.from({length:100},()=>new _(o)),P=new Image;P.src=V;let w=o.width/2,y=o.height/2;o.addEventListener("mousemove",e=>{w=e.clientX,y=e.clientY});let E=!1,$=0;const B=new Audio(q),s={current:"menu",previous:"menu",showMenu:!0},A=200,I=60,W=80;let d=[];function ne(){const e=o.width/2-A/2,t=o.height/2-4*W/2;d=[{x:e,y:t,width:A,height:I,image:O,action:se,visible:!0,hover:!1},{x:e,y:t+W,width:A,height:I,image:L,action:b,visible:!1,hover:!1},{x:e,y:t+W*2,width:A,height:I,image:k,action:ae,visible:!1,hover:!1},{x:e,y:t+W*3,width:A,height:I,image:H,action:re,visible:!1,hover:!1}]}function S(){if(!s.showMenu){d.forEach(e=>e.visible=!1);return}d[0].visible=s.current==="menu",d[1].visible=!1,d[2].visible=["paused","gameOver","victory"].includes(s.current),d[3].visible=s.current==="paused"}function se(){console.log("🎮 Starting game..."),s.current="playing",s.showMenu=!1,i.gameState="playing",i.waveStartTime=performance.now(),S()}function b(){s.current==="playing"?(console.log("⏸️ Game paused - Menu opened"),s.previous="playing",s.current="paused",s.showMenu=!0,R=performance.now()-i.waveStartTime):s.current==="paused"&&(console.log("▶️ Game resumed - Menu hidden"),s.current="playing",s.showMenu=!1,i.waveStartTime=performance.now()-R),S()}function ae(){i.currentWave=1,i.waveSize=4,i.waveStartTime=performance.now(),i.waveSpawned=!1,i.gameState="playing",i.waveTimeLimit=X(1),h.forEach(e=>e.destroy()),h.length=0,s.current="playing",s.showMenu=!1,S()}function re(){console.log("💾 Saving game...");const e={currentWave:i.currentWave,aliensCount:h.length};alert(`Game saved!
Wave: ${e.currentWave}
Aliens: ${e.aliensCount}`)}function x(e,t,n){return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height}function oe(e,t){d.forEach(n=>{n.visible&&(n.hover=x(e,t,n))})}function le(e,t){d.forEach(n=>{n.visible&&x(e,t,n)&&n.action()})}function he(e){if(!s.showMenu)return;const t=d.filter(m=>m.visible);if(t.length===0)return;const n=Math.min(...t.map(m=>m.x)),a=Math.max(...t.map(m=>m.x+m.width)),r=Math.min(...t.map(m=>m.y)),l=Math.max(...t.map(m=>m.y+m.height)),c=60,f=n-c,g=r-c,v=a-n+c*2,p=l-r+c*2;e.save(),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillRect(0,0,o.width,o.height),e.fillStyle="#0B1D44",e.fillRect(f,g,v,p),e.strokeStyle="#FE7712",e.lineWidth=4,e.strokeRect(f,g,v,p),e.shadowColor="rgba(0, 0, 0, 0.3)",e.shadowBlur=10,e.shadowOffsetX=0,e.shadowOffsetY=5,e.fillStyle="#0B1D44",e.fillRect(f,g,v,p),e.restore()}function ce(e){s.showMenu&&(he(e),d.forEach(t=>{t.visible&&(e.save(),t.hover&&(e.shadowColor="rgba(255, 255, 255, 0.8)",e.shadowBlur=10,e.globalAlpha=.9),e.drawImage(t.image,t.x,t.y,t.width,t.height),e.restore())}))}let R=0;const i={currentWave:1,totalWaves:20,waveSize:4,waveIncrement:4,waveSpawned:!1,waveStartTime:0,waveTimeLimit:6e4,gameState:"playing"};function X(e){const a=4e4/(i.totalWaves-1);return Math.max(2e4,6e4-a*(e-1))}function me(){i.currentWave++,i.waveSize+=i.waveIncrement,i.waveTimeLimit=X(i.currentWave),i.waveStartTime=performance.now(),i.waveSpawned=!1,i.gameState="playing"}function ue(){if(i.gameState!=="playing"||s.current!=="playing")return;const t=performance.now()-i.waveStartTime,n=h.filter(a=>a.isAlive||a.isDying).length;if(t>=i.waveTimeLimit&&n>0){i.gameState="waveFailed",s.current="gameOver",s.showMenu=!0,h.forEach(a=>a.destroy()),h.length=0,console.log(`💀 Wave ${i.currentWave} failed! Time's up!`),S();return}n===0&&i.waveSpawned&&(i.currentWave>=i.totalWaves?(i.gameState="gameComplete",s.current="victory",s.showMenu=!0,console.log(`🎉 Game Complete! You survived all ${i.totalWaves} waves!`)):(i.gameState="waveComplete",console.log(`✅ Wave ${i.currentWave} complete!`)),S())}const h=[];function de(){const e=Math.random()*(o.width-64),t=Math.random()*(o.height-64);h.push(new j(o,D,e,t))}function fe(){if(i.gameState!=="playing"||s.current!=="playing")return;if(h.filter(t=>t.isAlive||t.isDying).length===0&&!i.waveSpawned){i.waveStartTime===0&&(i.waveStartTime=performance.now(),i.waveTimeLimit=X(i.currentWave));for(let t=0;t<i.waveSize;t++)de();i.waveSpawned=!0}}function ge(){if(s.current!=="playing")return;let e=!1;for(const t of h)if(t.isAlive&&!t.isDying&&t.checkCollision(w,y)){t.hit(),e=!0;break}}function ve(){for(let e=h.length-1;e>=0;e--)h[e].isAlive||(h[e].destroy(),h.splice(e,1))}function pe(e){if(!["playing","paused"].includes(s.current))return;const n=performance.now()-i.waveStartTime,a=Math.max(0,i.waveTimeLimit-n),r=h.filter(v=>v.isAlive&&!v.isDying).length,l=window.innerWidth<768?16:24;if(e.font=`${l}px Arial`,e.fillStyle="white",e.textAlign="left",e.textBaseline="top",e.fillText(`Wave: ${i.currentWave}/${i.totalWaves}`,20,40),e.fillText(`Aliens: ${r}`,20,70),s.current==="playing"){const v=(a/1e3).toFixed(1);a<1e4?e.fillStyle="red":a<2e4?e.fillStyle="orange":e.fillStyle="white",e.fillText(`Time: ${v}s`,20,100);const p=200,m=10,Y=20,z=130;e.fillStyle="rgba(255, 255, 255, 0.3)",e.fillRect(Y,z,p,m);const C=a/i.waveTimeLimit;C>.5?e.fillStyle="green":C>.25?e.fillStyle="orange":e.fillStyle="red",e.fillRect(Y,z,p*C,m)}const c=window.innerWidth<768?20:32;e.font=`${c}px Arial`,e.textAlign="center",e.textBaseline="middle",e.shadowColor="black",e.shadowBlur=4;const f=o.width/2,g=o.height/2;s.current==="paused"?(e.fillStyle="yellow",e.fillText("⏸️ GAME PAUSED ⏸️",f,g-100)):i.gameState==="waveComplete"?(e.fillStyle="lime",e.fillText("Wave Complete! Click to continue",f,g-100)):s.current==="gameOver"?(e.fillStyle="red",e.fillText("💀 GAME OVER 💀",f,g-100)):s.current==="victory"&&(e.fillStyle="gold",e.fillText("🎉 VICTORY! All waves complete! 🎉",f,g-100)),e.shadowBlur=0}o.addEventListener("click",e=>{const t=o.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;if(s.showMenu){le(n,a);return}s.current==="playing"&&!s.showMenu&&(E=!0,$=performance.now(),B.currentTime=0,B.play(),ge(),B.play().then(()=>{console.log("shooting")}).catch(r=>{console.error("Error shooting",r)})),i.gameState==="waveComplete"&&s.current==="playing"&&!s.showMenu&&me()});o.addEventListener("mousemove",e=>{const t=o.getBoundingClientRect();if(w=e.clientX-t.left,y=e.clientY-t.top,s.showMenu){oe(w,y);let n=!1;d.forEach(a=>{a.visible&&a.hover&&(n=!0)}),o.style.cursor=n?"pointer":"default"}else o.style.cursor="none"});document.addEventListener("keydown",e=>{e.key==="Escape"&&(s.current==="playing"&&!s.showMenu||s.current==="paused"&&s.showMenu)&&b()});function G(){u?.clearRect(0,0,o.width,o.height),u?.drawImage(M,0,0,o.width,o.height);for(const e of ie)e.update(),e.draw(u);if(s.current==="playing"){for(const e of h)e.update(),e.draw(u);ve(),fe(),ue()}else for(const e of h)e.draw(u);if(s.current==="playing"&&!s.showMenu&&(u?.drawImage(P,w-32/2,y-32/2,32,32),E)){const t=performance.now()-$,n=200;if(t<n){const a=t/n,l=a*50,c=1-a;u?.beginPath(),u?.arc(w,y,l,0,Math.PI*2),u.fillStyle=`rgba(255, 255, 255, ${c})`,u?.fill()}else E=!1}pe(u),ce(u),requestAnimationFrame(G)}let F=0;const we=6;function T(){F++,F===we&&(ne(),S(),G())}M.onload=T;D.onload=T;O.onload=T;L.onload=T;k.onload=T;H.onload=T;
